angular.module("farmplace").controller("FarmOwnerCtrl",["$scope","FarmOwnerService","$location","$window",function(e,o,n,t){e.saveSessStorage=function(e,o){t.sessionStorage.foToken=o,t.sessionStorage.foId=e},e.farmOwnerSignup=function(){o.farmOwnerSignup(e.newFo).then(function(o){e.saveSessStorage(o.data.id,o.data.token),n.url("/foDashboard"),console.log(o)},function(e){console.log(e)})},e.farmOwnerLogin=function(){o.farmOwnerLogin(e.fo).then(function(o){e.saveSessStorage(o.data.id,o.data.token),n.url("/foDashboard"),console.log(o)},function(e){console.log(e)})}}]),angular.module("farmplace").controller("JobCtrl",["$scope","JobService","$location","$window",function(e,o,n,t){e.getAllJobs=function(){o.getAllJobs(sessionStorage.token).then(function(o){e.jobs=o.data,console.log(e.jobs)},function(e){console.log(e)})}}]),angular.module("farmplace").controller("UserCtrl",["$scope","UserService","$location","$window",function(e,o,n,t){e.saveSessStorage=function(e,o){t.sessionStorage.token=o,t.sessionStorage.userId=e},e.signup=function(){o.signup(e.newUser).then(function(o){e.saveSessStorage(o.data.id,o.data.token),n.url("/dashboard"),console.log(o)},function(e){console.log(e)})},e.login=function(){o.login(e.user).then(function(o){e.saveSessStorage(o.data.id,o.data.token),n.url("/dashboard"),console.log(o)},function(e){console.log(e)})},$(window).load(function(){$("#status").fadeOut(),$("#preloader").delay(350).fadeOut("slow"),$("body").delay(350).css({overflow:"visible"})}),$(document).ready(function(){$("#bg-slider").owlCarousel({navigation:!1,slideSpeed:100,autoPlay:5e3,paginationSpeed:100,singleItem:!0,mouseDrag:!1,transitionStyle:"fade"}),$("#testimonial-slider").owlCarousel({navigation:!1,slideSpeed:100,pagination:!0,paginationSpeed:100,singleItem:!0,mouseDrag:!1,transitionStyle:"goDown"}),$(".more-jobs a").click(function(e){e.preventDefault();var o=$(this);o.toggleClass("more-jobs a"),o.hasClass("more-jobs a")?o.text("View less jobs"):o.text("View more jobs")}),$(".more-jobs a").click(function(){$(".table tr.hide-jobs").toggle()})})}]),angular.module("farmplace").value("baseUrl","http://localhost:5000"),angular.module("farmplace").factory("FarmOwnerService",["$http","baseUrl",function(e,o){var n={};return n.farmOwnerSignup=function(n){return e.post(o+"/api/farmOwner/signup",n)},n.farmOwnerLogin=function(n){return e.post(o+"/api/farmOwner/login",n)},n}]),angular.module("farmplace").factory("JobService",["$http","baseUrl",function(e,o){var n={};return n.postJob=function(n){return e.post(o+"/api/jobs",token)},n.getAllJobs=function(n){return e.get(o+"/api/jobs",n)},n}]),angular.module("farmplace").factory("UserService",["$http","baseUrl",function(e,o){var n={};return n.signup=function(n){return e.post(o+"/api/user/signup",n)},n.login=function(n){return e.post(o+"/api/user/login",n)},n}]);var app=angular.module("farmplace",["ui.router"]);app.config(["$stateProvider","$urlRouterProvider","$httpProvider","$locationProvider",function(e,o,n,t){e.state("landing",{url:"/",templateUrl:"app/views/landing.view.html",controller:"UserCtrl"}).state("signin",{url:"/signin",templateUrl:"app/views/signin.view.html",controller:"UserCtrl"}).state("signup",{url:"/signup",templateUrl:"app/views/signup.view.html",controller:"UserCtrl"}).state("dashboard",{url:"/dashboard",templateUrl:"app/views/dashboard.view.html",controller:"JobCtrl"}).state("foSignup",{url:"/foSignup",templateUrl:"app/views/foSignup.view.html",controller:"FarmOwnerCtrl"}).state("foDashboard",{url:"/foDashboard",templateUrl:"app/views/foDashboard.view.html",controller:"FarmOwnerCtrl"}),o.otherwise("/"),t.html5Mode(!0),n.interceptors.push(["$q","$location","$window",function(e,o,n){return{request:function(e){return e.headers=e.headers||{},n.sessionStorage.token&&(e.headers["x-access-token"]=n.sessionStorage.token),e},responseError:function(n){return 403===n.status&&o.url("/home"),e.reject(n)}}}])}]);