angular.module("farmplace").controller("JobCtrl",["$scope","JobService","$location","$window",function(e,o,t,n){e.getAllJobs=function(){o.getAllJobs(sessionStorage.token).then(function(o){e.jobs=o.data,console.log(e.jobs)},function(e){console.log(e)})}}]),angular.module("farmplace").controller("UserCtrl",["$scope","UserService","$location","$window",function(e,o,t,n){e.saveSessStorage=function(e,o){n.sessionStorage.token=o,n.sessionStorage.userId=e},e.signup=function(){o.signup(e.newUser).then(function(o){e.saveSessStorage(o.data.id,o.data.token),t.url("/dashboard"),console.log(o)},function(e){console.log(e)})},e.login=function(){o.login(e.user).then(function(o){e.saveSessStorage(o.data.id,o.data.token),t.url("/dashboard"),console.log(o)},function(e){console.log(e)})}}]),angular.module("farmplace").value("baseUrl","http://localhost:5000"),angular.module("farmplace").factory("JobService",["$http","baseUrl",function(e,o){var t={};return t.getAllJobs=function(t){return e.get(o+"/api/jobs",t).then(function(e){return e})},t}]),angular.module("farmplace").factory("UserService",["$http","baseUrl",function(e,o){var t={};return t.signup=function(t){return e.post(o+"/api/user/signup",t).then(function(e){return e})},t.login=function(t){return e.post(o+"/api/user/login",t).then(function(e){return e})},t}]);var app=angular.module("farmplace",["ui.router"]);app.config(["$stateProvider","$urlRouterProvider","$httpProvider","$locationProvider",function(e,o,t,n){e.state("landing",{url:"/",templateUrl:"app/views/landing.view.html",controller:"UserCtrl"}).state("signup",{url:"/signup",templateUrl:"app/views/signup.view.html",controller:"UserCtrl"}).state("dashboard",{url:"/dashboard",templateUrl:"app/views/dashboard.view.html",controller:"JobCtrl"}).state("foSignup",{url:"/foSignup",templateUrl:"app/views/foSignup.view.html",controller:""}),o.otherwise("/"),n.html5Mode(!0),t.interceptors.push(["$q","$location","$window",function(e,o,t){return{request:function(e){return e.headers=e.headers||{},t.sessionStorage.token&&(e.headers["x-access-token"]=t.sessionStorage.token),e},responseError:function(t){return 403===t.status&&o.url("/home"),e.reject(t)}}}])}]);